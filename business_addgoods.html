<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="apple-mobile-web-app-capable" content="yes">  
		<meta name="viewport" content="width=device-width, initial-scale=1.0,minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">  
		<meta name="keywords" content="超级链商城" />
		<meta name="description" content="超级链商城" />
		<title>超级链商城</title>
		<link rel="icon" type="image/png" href="images/logo.png" sizes="32x32">
		<link rel="stylesheet" href="css/mui.min.css">
		<link rel="stylesheet" href="css/public.css">
		<link rel="stylesheet" href="css/business_user.css">
		<script src="js/jquery-1.11.0.min.js"></script>
		<!-- <script src="layer/layer.js"></script> -->
	</head>
	<body>
		<div class="header">
			<a class="back" href="javascript:history.back(-1);"><img src="images/back.png"/></a>
			<span class="txt">添加商品</span>
		</div>
		
		<div class="business_addGoods">
			<div class="add_img">
				<p class="title">
					<span class="line"></span>
					商品图 <span class="txt">（最多上传5张图片）</span>
				</p>
				<div class="flex" style="display: flex;flex-wrap: wrap;">
						<div class="upload_box">
							<div class="img">
								<img src="images/banner.png" >
								<img src="images/close.png" class="close" onclick="deleteImg(this)"/>
							</div>
							<div class="photo">
								<div class="photo_l">
									<img src="images/add_goods1.png" class="ico"/> 
								</div>
								<input type="file" class="file" id="file1" multiple onchange="previewGoods(this)"/>
							</div>
						</div>
				</div>
		
			</div>
			<div class="group" >
				<label>商品标题</label>
				<input type="" name="" class="title"  placeholder="输入商品介绍标题" />
			</div>
			<div class="group" style="display:block;">
				<label>添加详情图 <span class="txt">（最多上传5张图片）</span></label>
				<div class="detail">
					<textarea rows="10" cols="2" class="con" placeholder="输入商品详情介绍等等。。。。。。"></textarea>
					<div class="add_img">
						<div class="flex" style="display: flex;flex-wrap: wrap;    margin: -10px;">
							<div class="upload_box">
								<!-- <div class="img">
									<img src="images/banner.png" >
									<img src="images/close.png" class="close" onclick="deleteImg(this)"/>
								</div> -->
								<div class="photo">
									<div class="photo_l">
										<img src="images/add_goods2.png" class="ico"/> 
									</div>
									<input type="file" class="file" id="file1" onchange="preview(this)"/>
								</div>
							</div>
							
							<div class="upload_box">
								<!-- <div class="img">
									<img src="images/banner.png" >
									<img src="images/close.png" class="close" onclick="deleteImg(this)"/>
								</div> -->
								<div class="photo">
									<div class="photo_l">
										<img src="images/add_goods2.png" class="ico"/> 
									</div>
									<input type="file" class="file" id="file1" onchange="preview(this)"/>
								</div>
							</div>
							
							<div class="upload_box">
								<!-- <div class="img">
									<img src="images/banner.png" >
									<img src="images/close.png" class="close" onclick="deleteImg(this)"/>
								</div> -->
								<div class="photo">
									<div class="photo_l">
										<img src="images/add_goods2.png" class="ico"/> 
									</div>
									<input type="file" class="file" id="file1" onchange="preview(this)"/>
								</div>
							</div>
							
							<div class="upload_box">
								<!-- <div class="img">
									<img src="images/banner.png" >
									<img src="images/close.png" class="close" onclick="deleteImg(this)"/>
								</div> -->
								<div class="photo">
									<div class="photo_l">
										<img src="images/add_goods2.png" class="ico"/> 
									</div>
									<input type="file" class="file" id="file1" onchange="preview(this)"/>
								</div>
							</div>
							
							<div class="upload_box">
								<!-- <div class="img">
									<img src="images/banner.png" >
									<img src="images/close.png" class="close" onclick="deleteImg(this)"/>
								</div> -->
								<div class="photo">
									<div class="photo_l">
										<img src="images/add_goods2.png" class="ico"/> 
									</div>
									<input type="file" class="file" id="file1" onchange="preview(this)"/>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="group">
				<label>商品售价</label>
				<div class="r">
					<span class="coin orange">￥</span>
					<input type="" name="" class="price"  placeholder="输入商品售价" />
				</div>
				
			</div>
			<div class="group">
				<label>商品原价(选填)</label>
				<div class="r">
					<span class="coin">￥</span>
					<input type="" name="" class="old_price"  placeholder="输入商品原价" />
				</div>
			</div>
			<div class="group">
				<label>商品库存</label>
				<input type="" name="" class="stock"  placeholder="输入库存数量" />
			</div>
			<div class="group">
				<label>商品分类</label>
				<div class="chooseType">
					<select class="choose">
						<option value ="百货">百货</option>
						<option value ="百货">百货</option>
					</select>
					<img src="images/more.png" class="ico">
				</div>
			</div>
			
			<div class="warm">
				<p><img src="images/warning1.png" class="ico" >注意：</p>
				<p> 1.商品价格、库存、规格信息可直接修改。 </p>
				<p> 2.修改商品图片、商品标题、商品详情则需要重新进行审核。</p>
				<p>3.已经上架的商品再次审核会默认为下架状态。</p>
			</div>
			<button type="button" class="submit">提交</button>
		</div>
		
		<script src="js/check.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/mui.min.js" type="text/javascript" charset="utf-8"></script>

		<script type="text/javascript">
					//图片预览
			 function previewGoods(file) {
				var img;
				var parent=$(file).parents(".photo");
				if (file.files && file.files[0]) {
					var reader = new FileReader();
					reader.onload = function (evt) {
						var src=evt.target.result;
						img='<div class="img"><img src="'+src+'" ><img src="images/close.png" class="close" onclick="deleteImg(this)"/></div>';
						// console.log(evt.target.result)
						parent.before(img);
					}
					reader.readAsDataURL(file.files[0]);
				} else {
					var src=file.value;
					img='<img src="' + src + '" class="img"/>';
					parent.html(img);
				}
			}
			
			//图片预览
			 function preview(file) {
				var img;
				var parent=$(file).parents(".photo");
				if (file.files && file.files[0]) {
					var reader = new FileReader();
					reader.onload = function (evt) {
						var src=evt.target.result;
						img='<div class="img"><img src="'+src+'" ><img src="images/close.png" class="close" onclick="deleteImg(this)"/></div>';
						// console.log(evt.target.result)
						parent.before(img);
					}
					reader.readAsDataURL(file.files[0]);
				} else {
					var src=file.value;
					img='<img src="' + src + '" class="img"/>';
					parent.html(img);
				}
			}
			
			
		//删除图片
		function deleteImg(obj){
			console.log(obj)
			var parent=$(obj).parents(".img");
			parent.remove();
		}
		
		$(".submit").click(function(){
			var title=$(".group .title").val();
			var con=$(".group .con").val();
			var price=$(".group .price").val();
			var old_price=$(".group .old_price").val();
			var stock=$(".group .stock").val();
			var type=$(".group .choose option:selected").val();
			//是否非空
			if(!isKong(title,$(".group .title").attr("placeholder"))){
				return false;
			}
			//是否非空
			if(!isKong(price,$(".group .price").attr("placeholder"))){
				return false;
			}
			//是否非空
			if(!isKong(stock,$(".group .stock").attr("placeholder"))){
				return false;
			}
			
			$(".submit").attr("disabled",true);
			mui.alert("","提交成功","确定",function(){
				window.location.href = "business_user.html";
			})
			$(".submit").attr("disabled",false);
		})
		
		
		</script>
	</body>
</html>
